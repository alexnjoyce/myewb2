{% extends "conference/schedule/base.html" %}

{% load conference_tags %}

{% block body %}
    <strong>{{ session.name }}</strong><br/>
    {{ session.time}} - {{ session.endtime }} ({{ session.room.name }})<br/>
    <em>{{ session.streamverbose }}</em>
    <br/><br/>
    
    {% if request.user.is_authenticated %}
        {% attendance session request.user as attending tentative %}
        {% if attending %}
            <strong>This session is in your schedule!</strong><br/>
            <em>This is NOT a formal RSVP; all sessions are first-come, first-serve</em>
            <br/>
            <a href="{% url conference_session_tentative session.id %}">Move to my backup list</a> | 
            <a href="{% url conference_session_skip session.id %}">Remove from my schedule</a>
        {% endif %}
        
        {% if tentative %}
            <strong>This session is in your backup list.</strong><br/>
            <em>This is NOT a formal RSVP; all sessions are first-come, first-serve</em>
            <br/>
            <a href="{% url conference_session_attend session.id %}">Move to my schedule</a> | 
            <a href="{% url conference_session_skip session.id %}">Remove from my list</a>
        {% endif %}
        
        {% if not attending and not tentative %}
            Add to... 
            <a href="{% url conference_session_attend session.id %}">my schedule</a> | 
            <a href="{% url conference_session_tentative session.id %}">my backup list</a>
        {% endif %}
        <br/><br/>
    {% endif %}
    
    <p>
        {{ session.long_description|linebreaksbr }}
    </p>
    <hr/>
    
    <p>
        TODO: who else is attending, predict capacity...
    </p>
    <hr/>
    
    <p>
        <a href="{% url conference_by_time session.dayverbose session.timeverbose %}">Find other sessions at this time</a><br/>
        <a href="{% url conference_by_stream session.stream %}">Find other sessions in this content stream</a>
    </p>
    <hr/>
    
    {% if perms.conference %}
        <p>
            <a href="{% url conference_session_edit session.id %}">Edit this session</a><br/>
            <a href="{% url conference_session_delete session.id %}">Delete this session</a>
        </p>
    {% endif %}
    
{% endblock %}
